<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="post">

<!--    게시글 등록-->
    <insert id="insertPost" parameterType="com.study.model.PostDto" useGeneratedKeys="true" keyProperty="postId">
        INSERT INTO post(category_id, name, password, title, content)
        VALUES (#{categoryId}, #{name}, #{password}, #{title}, #{content})
    </insert>

<!--    전체 카테고리id 가져오기-->
    <select id="selectCategoryIdList" resultType="int">
        SELECT category_id
        FROM category
    </select>

<!--    전체 게시글 리스트 가져오기-->
    <select id="selectPostList" resultType="com.study.model.PostVo">
        SELECT
            post.post_id AS postId,
            category.category_name AS category,
            post.name,
            post.title,
            post.view_count AS viewCount,
            DATE_FORMAT(post.create_date, '%Y%.%m%.%d% %h%:%i') AS createDate,
            DATE_FORMAT(post.update_date, '%Y%.%m%.%d% %h%:%i') AS updateDate
        FROM post post
            JOIN category category
                ON post.category_id = category.category_id
    </select>
</mapper>